<!-- GENERATED by AgentKit Forge v0.1.2 â€” DO NOT EDIT -->
<!-- Source: .agentkit/spec + .agentkit/overlays/__TEMPLATE__ -->
<!-- Regenerate: pnpm -C .agentkit agentkit:sync -->
# Blockchain Rules

Standards for blockchain integrations including Solana, EtherLink, and x402 payment protocol patterns.

## Applies To

- **/*.sol
- **/blockchain/**
- **/web3/**
- **/contracts/**
- **/programs/**

## Conventions

- **bc-solana** [error]: Solana programs must use Anchor framework conventions. Validate all account constraints using Anchor macros. Use PDAs (Program Derived Addresses) for deterministic account addressing. All instructions must have explicit error codes and documentation.
- **bc-etherlink** [error]: EtherLink integrations must follow the bridge contract pattern. Validate all cross-chain messages. Implement replay protection. Use the canonical EtherLink SDK for L1-L2 communication. Handle finality differences between L1 and L2 explicitly.
- **bc-x402** [error]: x402 payment protocol implementations must follow the HTTP 402 payment-required flow. Implement proper payment verification before granting resource access. Support idempotent payment processing. Include receipt generation and verification. Handle payment timeout and retry scenarios.
- **bc-gas-optimization** [warning]: Optimize for gas costs. Minimize storage operations, batch transactions where possible. (EVM-specific) Use calldata over memory for read-only function parameters. Document gas cost estimates for public functions.
- **bc-audit-trail** [error]: All state-changing operations must emit events for off-chain indexing. Include sufficient context in events (identifiers, previous/new values, relevant metadata) for reconstruction of state transitions. Transaction hashes are provided by blockchain receipts and need not be emitted by the contract.
